---
description: 코드 변경에 대한 종합적인 리뷰를 수행합니다.
argument-hint: [staged|all|<파일경로>]
allowed-tools: Read, Grep, Glob, Bash
model: sonnet
---

# 코드 리뷰

## 리뷰 대상
$ARGUMENTS

## 리뷰 범위 결정

- `staged`: 스테이징된 변경사항
- `all`: 모든 미커밋 변경사항
- 파일 경로: 특정 파일/디렉토리

## 리뷰 프로세스

### 1. 변경사항 수집
```bash
# staged인 경우
git diff --cached

# all인 경우
git diff

# 특정 파일인 경우
git diff -- <파일경로>
```

### 2. 보안 리뷰
- OWASP Top 10 취약점 검사
- 입력 검증 확인
- 인증/인가 검증
- 민감 정보 노출 확인

### 3. 성능 리뷰
- 알고리즘 복잡도 분석
- 데이터베이스 쿼리 효율성
- 메모리 사용 패턴
- N+1 쿼리 문제

### 4. 유지보수성 리뷰
- 코드 가독성
- 모듈화 수준
- 네이밍 규칙
- 문서화 상태

### 5. 테스트 리뷰
- 테스트 커버리지
- 엣지 케이스 처리
- 테스트 품질

### 6. 규칙 준수
- 프로젝트 코딩 표준
- CLAUDE.md 규칙
- 아키텍처 패턴

## 출력 형식

```markdown
# 코드 리뷰 리포트

## 개요
- 검토 파일: {파일 목록}
- 검토 일시: {일시}
- 전체 평가: 승인 / 수정 필요 / 거부

## 발견 사항

### [Critical] {제목}
**위치**: `{파일}:{라인}`
**이슈**: {설명}
**권장 수정**: {수정 방법}

### [High] {제목}
...

### [Medium] {제목}
...

### [Low] {제목}
...

## 요약

| 심각도 | 개수 | 조치 |
|-------|-----|------|
| Critical | 0 | 즉시 수정 |
| High | 0 | 병합 전 수정 |
| Medium | 0 | 권장 수정 |
| Low | 0 | 선택적 |

## 결론
{최종 의견}
```

## 산출물

**파일**: `state/outputs/review-{timestamp}.md`
